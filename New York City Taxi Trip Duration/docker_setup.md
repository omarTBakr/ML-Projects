
## üß∞ Prerequisites

Ensure your Fedora 42 system has the following:

* **System Requirements**:

  * Fedora 42 installed
  * At least 4GB of RAM
  * Sufficient disk space for map data

* **Installed Packages**:

  * Docker
  * Docker Compose

If Docker and Docker Compose are not installed, you can install them using:

```bash
sudo dnf install -y docker docker-compose
sudo systemctl enable --now docker
```

Add your user to the `docker` group to run Docker commands without `sudo`:

```bash
sudo usermod -aG docker $USER
newgrp docker
```

---

## üìÅ Directory Setup

1. **Create Directories**:

   ```bash
   mkdir -p ~/osrm/osrm-data
   ```

2. **Download New York Map Data**:

   Download the latest OpenStreetMap data for New York:

   ```bash
   wget -P ~/osrm/osrm-data https://download.geofabrik.de/north-america/us/new-york-latest.osm.pbf
   ```

---

## üê≥ Docker Compose Configuration

1. **Create Docker Compose File**:

   Navigate to the `osrm` directory and create a `docker-compose.yml` file:

   ```bash
   cd ~/osrm
   touch docker-compose.yml
   ```

2. **Edit `docker-compose.yml`**:

   Open the file in your preferred text editor and add the following content:

   ```yaml
   version: '3'
   services:
     osrm-backend:
       image: ghcr.io/project-osrm/osrm-backend:v6.0.0
       ports:
         - "5000:5000"
       volumes:
         - ./osrm-data:/data
       command: osrm-routed --algorithm mld /data/new-york-latest.osrm
   ```

   This configuration sets up the OSRM backend service using the preprocessed data.

---

## üóÇÔ∏è Data Preprocessing

Before starting the OSRM service, preprocess the map data:

1. **Navigate to the Data Directory**:

   ```bash
   cd ~/osrm/osrm-data
   ```

2. **Run Preprocessing Commands**:

   Execute the following commands to extract, partition, and customize the data:

   ```bash
   docker run -t -v "${PWD}:/data" osrm/osrm-backend osrm-extract -p /opt/car.lua /data/new-york-latest.osm.pbf
   docker run -t -v "${PWD}:/data" osrm/osrm-backend osrm-partition /data/new-york-latest.osrm
   docker run -t -v "${PWD}:/data" osrm/osrm-backend osrm-customize /data/new-york-latest.osrm
   ```

   These steps prepare the routing data for use by the OSRM backend.

---

## üöÄ Launch OSRM Backend

1. **Start the OSRM Service**:

   Return to the `osrm` directory and run:

   ```bash
   docker-compose up -d
   ```

   This command starts the OSRM routing service in detached mode.

2. **Verify the Service**:

   Check if the OSRM service is running correctly:

   ```bash
   curl http://localhost:5000/status
   ```

   A successful response indicates that the OSRM backend is operational.

---

## üìÑ Expected Files

After preprocessing, your `osrm-data` directory should contain files like:

* `new-york-latest.osm.pbf`
* `new-york-latest.osrm`
* `new-york-latest.osrm.partition`
* `new-york-latest.osrm.properties`
* `new-york-latest.osrm.names`
* `new-york-latest.osrm.geometry`
* `new-york-latest.osrm.cnbg`
* `new-york-latest.osrm.cells`
* `new-york-latest.osrm.maneuver_overrides`
* `new-york-latest.osrm.restrictions`
* `new-york-latest.osrm.timestamp`
* `new-york-latest.osrm.datasource_names`
* `new-york-latest.osrm.ramIndex`
* `new-york-latest.osrm.fileIndex`
* `new-york-latest.osrm.turn_penalties_index`
* `new-york-latest.osrm.turn_duration_penalties`
* `new-york-latest.osrm.turn_weight_penalties`
* `new-york-latest.osrm.tld`
* `new-york-latest.osrm.tls`
* `new-york-latest.osrm.icd`
* `new-york-latest.osrm.nbg_nodes`
* `new-york-latest.osrm.ebg`
* `new-york-latest.osrm.ebg_nodes`
* `new-york-latest.osrm.cnbg_to_ebg`
* `new-york-latest.osrm.enw`
* `new-york-latest.osrm.cell_metrics`
* `new-york-latest.osrm.mldgr`

These files are essential for the OSRM backend to function correctly.

---

## üß™ Testing the OSRM API

You can test the OSRM API by making a sample route request. Replace the coordinates with your desired start and end points:

```bash
curl "http://localhost:5000/route/v1/driving/-73.985130,40.758896;-73.985000,40.748817?overview=false"
```

This request queries a route between two points in New York City.

---

## üìö Additional Resources

* **OSRM Documentation**: [https://project-osrm.org/docs/](https://project-osrm.org/docs/)
* **OSRM GitHub Repository**: [https://github.com/Project-OSRM/osrm-backend](https://github.com/Project-OSRM/osrm-backend)

These resources provide comprehensive information on OSRM's capabilities and advanced configurations.

---

*This Docker Compose file and setup instructions were generated by ChatGPT, incorporating my guidance and specific instructions.*

---
